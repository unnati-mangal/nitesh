<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Happy Birthday ‚Äî Nitesh ‚ù§Ô∏è</title>
    <link
        href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600;700;800&family=Poppins:wght@300;400;600;700&display=swap"
        rel="stylesheet">
    <style>
        :root {
            --choco: #6b3b2b;
            --beige-1: #efe7dd;
            --beige-2: #d8bca8;
            --accent: #b88a6f;
            --muted: #4e342b;
            --paper: rgba(0, 0, 0, 0.03);
            --glass: rgba(255, 255, 255, 0.06);
            --card-shadow: 0 30px 80px rgba(101, 64, 52, 0.08);
            --radius: 16px;
        }

        * {
            box-sizing: border-box
        }

        html,
        body {
            height: 100%;
            margin: 0;
            font-family: 'Poppins', system-ui, -apple-system, 'Segoe UI', Roboto;
            color: var(--muted);
            background: linear-gradient(180deg, var(--beige-1), #efe0d4);
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale
        }

        /* full-bleed frame that fills viewport */
        .frame {
            width: 100%;
            height: 100vh;
            display: grid;
            grid-template-columns: 1fr 480px;
            gap: 0;
            align-items: stretch;
            justify-items: stretch;
            overflow: hidden;
            box-shadow: var(--card-shadow)
        }

        /* left content (fills fully) */
        .left {
            padding: 48px 56px;
            display: flex;
            flex-direction: column;
            gap: 20px;
            background:
                /* subtle paper texture using svg data URI */
                linear-gradient(180deg, rgba(255, 255, 255, 0.02), rgba(255, 255, 255, 0.00)), url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='200' height='200'><rect fill='%23efe7dd' width='100%25' height='100%25'/><circle fill='%23f5efe9' cx='100' cy='100' r='100' opacity='0.02'/></svg>");
            position: relative;
            gap: 22px
        }

        /* left decorative strip */
        .left::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 84px;
            background: linear-gradient(180deg, var(--accent), var(--beige-2));
            clip-path: polygon(0 0, 100% 0, 82% 100%, 0 100%);
            box-shadow: inset -12px 0 30px rgba(0, 0, 0, 0.03)
        }

        .title {
            margin-left: 110px
        }

        h1 {
            font-family: 'Playfair Display', serif;
            font-size: 56px;
            margin: 0;
            color: var(--choco);
            letter-spacing: -1px
        }

        h1 .name {
            color: var(--accent);
            font-weight: 800
        }

        .subtitle {
            margin-left: 110px;
            color: #5a3b33;
            font-size: 16px;
            max-width: 740px
        }

        /* cards row uses full space */
        .cards {
            margin-left: 110px;
            display: flex;
            gap: 20px;
            align-items: stretch
        }

        .card {
            flex: 1;
            border-radius: 14px;
            padding: 22px;
            background: linear-gradient(180deg, #fffaf7, #fff6f2);
            box-shadow: 0 12px 36px rgba(0, 0, 0, 0.04);
            border: 1px solid var(--paper);
            min-height: 160px;
            position: relative
        }

        .card h3 {
            margin: 0 0 10px;
            font-size: 16px;
            color: var(--choco)
        }

        .card p {
            margin: 0;
            color: #5a433f;
            line-height: 1.5
        }

        .note-emboss {
            position: absolute;
            right: 18px;
            top: 12px;
            font-size: 12px;
            color: rgba(0, 0, 0, 0.08);
            transform: rotate(-12deg)
        }

        /* nickname rotator */
        .nicknames {
            margin-left: 110px;
            margin-top: 6px;
            display: flex;
            align-items: center;
            gap: 18px
        }

        .label {
            font-weight: 800;
            color: var(--choco);
            min-width: 120px
        }

        .typewrap {
            height: 48px;
            width: 420px;
            overflow: hidden;
            border-radius: 12px;
            padding: 8px 12px;
            background: linear-gradient(90deg, rgba(200, 170, 150, 0.04), rgba(255, 255, 255, 0.02));
            display: flex;
            align-items: center
        }

        .types {
            display: flex;
            flex-direction: column
        }

        .types div {
            height: 48px;
            display: flex;
            align-items: center;
            font-weight: 700;
            font-size: 18px;
            color: #3b251f;
            opacity: 0;
            transform: translateY(12px);
            animation: typeLoop 10s linear infinite
        }

        @keyframes typeLoop {
            0% {
                opacity: 0;
                transform: translateY(12px)
            }

            6% {
                opacity: 1;
                transform: translateY(0)
            }

            18% {
                opacity: 1
            }

            24% {
                opacity: 0;
                transform: translateY(-12px)
            }

            100% {
                opacity: 0
            }
        }

        .swirl {
            margin-left: 110px;
            height: 6px;
            width: 220px;
            background: linear-gradient(90deg, var(--choco), var(--accent));
            border-radius: 999px;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.04)
        }

        /* footer controls anchored bottom-left inside left panel */
        .controls {
            position: absolute;
            left: 110px;
            bottom: 34px;
            display: flex;
            gap: 12px;
            align-items: center
        }

        .btn {
            padding: 10px 16px;
            border-radius: 999px;
            background: linear-gradient(90deg, rgba(255, 255, 255, 0.06), rgba(255, 255, 255, 0.02));
            border: 1px solid var(--paper);
            font-weight: 700;
            cursor: pointer
        }

        /* right collage fills entire right panel */
        .right {
            background: linear-gradient(180deg, var(--beige-2), var(--beige-1));
            padding: 28px;
            display: flex;
            align-items: stretch;
            justify-content: center
        }

        .collage {
            width: 100%;
            height: 100%;
            border-radius: 12px;
            padding: 18px;
            display: grid;
            grid-template-columns: 1fr 1fr;
            grid-template-rows: 1fr 1fr;
            gap: 12px;
            background: linear-gradient(180deg, rgba(0, 0, 0, 0.02), rgba(0, 0, 0, 0.00));
            box-shadow: inset 0 -20px 40px rgba(0, 0, 0, 0.04);
            border: 1px solid rgba(0, 0, 0, 0.04)
        }

        .slot {
            position: relative;
            overflow: hidden;
            border-radius: 12px;
            border: 6px solid rgba(255, 255, 255, 0.32);
            background: linear-gradient(135deg, var(--beige-2), var(--accent));
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer
        }

        .slot img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block
        }

        .slot .placeholder {
            font-family: Poppins;
            font-weight: 700;
            color: var(--choco);
            text-align: center;
            padding: 12px
        }

        /* heart & header inside collage */
        .collage-header {
            grid-column: 1/-1;
            display: flex;
            align-items: center;
            gap: 12px;
            justify-content: center;
            padding-bottom: 6px
        }

        .heart {
            font-size: 48px;
            display: inline-block;
            animation: heartbeat 1.25s infinite;
            transform-origin: center;
            color: var(--choco)
        }

        @keyframes heartbeat {
            0% {
                transform: scale(1)
            }

            40% {
                transform: scale(1.12)
            }

            60% {
                transform: scale(1.06)
            }

            100% {
                transform: scale(1)
            }
        }

        /* modal */
        .modal {
            position: fixed;
            inset: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(18, 12, 10, 0.45);
            opacity: 0;
            pointer-events: none;
            transition: opacity 220ms
        }

        .modal.show {
            opacity: 1;
            pointer-events: auto
        }

        .modal-card {
            width: 92%;
            max-width: 640px;
            border-radius: 12px;
            padding: 22px;
            background: linear-gradient(180deg, #fffaf7, #fff6f1);
            box-shadow: 0 40px 120px rgba(20, 10, 10, 0.4);
            border: 1px solid rgba(0, 0, 0, 0.04)
        }

        .modal-card h3 {
            margin: 0 0 8px;
            font-family: 'Playfair Display', serif;
            color: var(--choco)
        }

        .modal-card p {
            margin: 0 0 10px;
            color: #4a322b;
            line-height: 1.5
        }

        /* responsive adjustments */
        @media (max-width:980px) {
            .frame {
                grid-template-columns: 1fr;
                grid-auto-rows: auto;
                height: auto
            }

            .left {
                padding: 28px 20px
            }

            .left::before {
                display: none
            }

            .title {
                margin-left: 0
            }

            .subtitle {
                margin-left: 0
            }

            .cards {
                margin-left: 0;
                flex-direction: column
            }

            .nicknames {
                margin-left: 0
            }

            .swirl {
                margin-left: 0
            }

            .controls {
                position: static;
                margin-top: 16px
            }

            .right {
                padding: 18px
            }

            .collage {
                grid-template-columns: 1fr 1fr;
                grid-template-rows: repeat(2, 160px)
            }
        }
    </style>
</head>

<body>
    <div class="frame" role="main" aria-label="Birthday page for Nitesh">
        <!-- LEFT PANEL -->
        <section class="left" aria-labelledby="hero-title">
            <div class="title" id="hero-title">
                <h1>Happy Birthday, <span class="name">Nitesh</span> <span aria-hidden="true">üéâ</span></h1>
                <div class="subtitle">This whole page is for you ‚Äî warm, full and never empty. A little corner of
                    cinnamon & cream, made with love.</div>
            </div>

            <div class="cards" aria-hidden="false">
                <article class="card" aria-labelledby="note-title">
                    <div class="note-emboss">For you ‚Ä¢ 100% love</div>
                    <h3 id="note-title">A short loving note</h3>
                    <p id="mainNote"> Happy 18th Birthday, my love! Today isn‚Äôt just your birthday ‚Äî it‚Äôs the beginning
                        of a beautiful new chapter in your life, and I feel so lucky to be a part of it. Watching you
                        grow, dream, and become the amazing person you are makes my heart so full. Thank you for loving
                        me, supporting me, and making every moment feel special. I‚Äôm so proud of you, and I can‚Äôt wait
                        to see all the incredible things you‚Äôll achieve. On your special day, I just want you to know
                        that you are my happiness, my comfort, and my forever person. I love you endlessly, today and
                        always. ‚ù§Ô∏èüéÇ‚ú®. You‚Äôre my favourite person to annoy, adore, hug, and steal food from. I love you
                        more than you love your sleep, and that‚Äôs saying something. Here‚Äôs to you, my
                        softie, my everything. ‚ù§Ô∏è‚ú®</p>
                </article>

                <div style="width:320px;display:flex;flex-direction:column;gap:14px">
                    <div class="card" aria-labelledby="treat-title">
                        <h3 id="treat-title">special note</h3>
                        <p>Babe!
                            I will love you way more than you can handle. You make my days lighter,
                            my heart louder, and my life a lot more fun. I adore you, I LOVE YOU. ‚ù§Ô∏è‚ú®
                        </p>
                    </div>
                    <div class="card" aria-labelledby="from-title"
                        style="display:flex;align-items:center;justify-content:center">
                        <div style="text-align:center">
                            <div id="from-title" style="font-weight:800;color:var(--choco)">From</div>
                            <div style="font-weight:700;margin-top:8px">Your kabutari ‚ù§Ô∏è</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="nicknames" aria-hidden="false">
                <div class="label">My Pookie</div>
                <div class="typewrap" aria-hidden="true">
                    <div class="types" aria-hidden="true">
                        <div style="animation-delay:0s">Peeru Peeru</div>
                        <div style="animation-delay:2s">Sweetheart</div>
                        <div style="animation-delay:4s">Love</div>
                        <div style="animation-delay:6s">Baby</div>
                        <div style="animation-delay:8s">Babe</div>
                    </div>
                </div>
            </div>

            <div class="swirl" aria-hidden="true"></div>

            <!-- controls anchored to left panel bottom -->
            <div class="controls" role="toolbar" aria-label="Page controls">
                <button class="btn" id="openSurprise">Open Surprise ‚ú®</button>
                <button class="btn" id="downloadBtn">Download</button>
            </div>
        </section>

        <!-- RIGHT PANEL (photo collage) -->
        <aside class="right" aria-labelledby="collage-title">
            <div style="width:100%;height:100%;display:flex;flex-direction:column;gap:12px">
                <div class="collage-header" id="collage-title">
                    <span class="heart" aria-hidden="true">‚ù§Ô∏è</span>
                    <strong style="font-family:Playfair Display;color:var(--choco);font-size:18px">Memories &
                        Photos</strong>
                </div>

                <div class="collage" id="photoCollage"
                    aria-label="Photo collage - click any slot to upload or drag and drop">
                    <!-- IMPORTANT: these are the exact placeholders you requested.
               You can replace the src attributes with your own filenames/URLs
               or allow the upload mechanism to turn them into data URLs. -->
                    <div class="slot" id="slot1" data-index="1" tabindex="0" aria-label="Photo slot 1">
                        <img id="photo1" src="phot.jpg" alt="photo 1">
                        <div class="placeholder" style="display:none">Click to add</div>
                    </div>
                    <div class="slot" id="slot2" data-index="2" tabindex="0" aria-label="Photo slot 2">
                        <img id="photo2" src="photo 4.jpg" alt="photo 2">
                        <div class="placeholder" style="display:none">Click to add</div>
                    </div>
                    <div class="slot" id="slot3" data-index="3" tabindex="0" aria-label="Photo slot 3">
                        <img id="photo3" src="photo3.jpg" alt="photo 3">
                        <div class="placeholder" style="display:none">Click to add</div>
                    </div>
                    <div class="slot" id="slot4" data-index="4" tabindex="0" aria-label="Photo slot 4">
                        <img id="photo4" src="photo.2.jpg" alt="photo 4">
                        <div class="placeholder" style="display:none">Click to add</div>
                    </div>
                </div>
            </div>
        </aside>
    </div>

    <!-- Surprise Modal -->
    <div class="modal" id="modal" role="dialog" aria-modal="true" aria-hidden="true" aria-label="Birthday surprise">
        <div class="modal-card" role="document">
            <h3>Happy Birthday, Peeru ‚ù§Ô∏è</h3>
            <p id="modalText">My love, life with you feels warm and full. Wishing you a year that overflows with joy,
                deep rest, and the little surprises that make your heart smile. I am yours, always. ‚Äî Love, Peeru</p>
            <div style="display:flex;gap:10px;justify-content:flex-end;margin-top:14px">
                <button class="btn" id="closeModal">Close</button>
                <button class="btn" id="copyNote">Copy Note</button>
            </div>
        </div>
    </div>

    <script>
        /*******************************
         * Utility & UI wiring
         *******************************/

        // Accessibility: focus trap basics for modal (small, usable)
        const modal = document.getElementById('modal');
        const openSurprise = document.getElementById('openSurprise');
        const closeModal = document.getElementById('closeModal');
        const copyNote = document.getElementById('copyNote');
        const modalText = document.getElementById('modalText');

        // Set today's date visually somewhere if needed (not shown) ‚Äî can be added
        // const dateP = document.querySelector('#dateP'); dateP.textContent = new Date().toLocaleDateString();

        // OPEN modal with confetti + chime
        openSurprise.addEventListener('click', () => {
            openSurprise.disabled = true;
            openSurprise.textContent = 'Opened ‚ú®';
            showModal();
            burstConfetti(36);
            playChime();
        });

        closeModal.addEventListener('click', () => {
            hideModal();
        });

        // Close modal with Escape
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') hideModal();
        });

        function showModal() {
            modal.classList.add('show');
            modal.setAttribute('aria-hidden', 'false');
            // move focus into modal
            closeModal.focus();
        }
        function hideModal() {
            modal.classList.remove('show');
            modal.setAttribute('aria-hidden', 'true');
            openSurprise.focus();
        }

        // Copy note to clipboard
        copyNote.addEventListener('click', async () => {
            try {
                await navigator.clipboard.writeText(modalText.textContent);
                alert('Birthday note copied to clipboard!');
            } catch (err) {
                alert('Could not copy automatically ‚Äî select the note and copy manually.');
            }
        });

        /*******************************
         * Confetti generator
         *******************************/
        function burstConfetti(count = 30) {
            for (let i = 0; i < count; i++) {
                const el = document.createElement('div');
                el.style.position = 'fixed';
                el.style.left = (10 + Math.random() * 80) + '%';
                el.style.top = (10 + Math.random() * 20) + '%';
                el.style.width = (6 + Math.random() * 10) + 'px';
                el.style.height = (10 + Math.random() * 16) + 'px';
                el.style.background = ['#6b3b2b', '#b88a6f', '#d8bca8', '#efe7dd'][Math.floor(Math.random() * 4)];
                el.style.borderRadius = '3px';
                el.style.transform = 'translateY(0) rotate(' + Math.random() * 360 + 'deg)';
                el.style.zIndex = 99999;
                el.style.pointerEvents = 'none';
                document.body.appendChild(el);
                const dur = 1200 + Math.random() * 1400;
                const anim = el.animate([
                    { transform: 'translateY(0) rotate(0deg)', opacity: 1 },
                    { transform: 'translateY(420px) rotate(720deg)', opacity: 0 }
                ], { duration: dur, easing: 'cubic-bezier(.2,.9,.2,1)' });
                anim.onfinish = () => el.remove();
            }
        }

        /*******************************
         * Chime (gentle) & ambient music toggle
         *******************************/
        function playChime() {
            try {
                const ctx = new (window.AudioContext || window.webkitAudioContext)();
                const o = ctx.createOscillator();
                const g = ctx.createGain();
                o.type = 'sine';
                o.frequency.value = 660;
                g.gain.value = 0.02;
                o.connect(g); g.connect(ctx.destination); o.start();
                setTimeout(() => { o.frequency.value = 880; }, 120);
                setTimeout(() => { o.stop(); ctx.close(); }, 520);
            } catch (e) { }
        }

        // Ambient tune toggle using a simple oscillator (soft sine)
        let musicCtx = null;
        let musicOsc = null;
        const toggleMusic = document.getElementById('toggleMusic');
        toggleMusic.addEventListener('click', () => {
            if (!musicCtx) {
                try {
                    musicCtx = new (window.AudioContext || window.webkitAudioContext)();
                    musicOsc = musicCtx.createOscillator();
                    const g = musicCtx.createGain();
                    musicOsc.type = 'sine';
                    musicOsc.frequency.value = 220;
                    g.gain.value = 0.01;
                    musicOsc.connect(g); g.connect(musicCtx.destination); musicOsc.start();
                    toggleMusic.textContent = 'Stop Tune';
                } catch (e) {
                    alert('Audio unavailable on this device');
                }
            } else {
                musicOsc.stop();
                musicCtx.close();
                musicOsc = null;
                musicCtx = null;
                toggleMusic.textContent = 'Play Soft Tune';
            }
        });

        /*******************************
         * Download page as HTML
         *******************************/
        document.getElementById('downloadBtn').addEventListener('click', () => {
            // Create a clean HTML snapshot (this includes current data URLs inserted by uploads)
            const html = '<!doctype html>\\n' + document.documentElement.outerHTML;
            const blob = new Blob([html], { type: 'text/html' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a'); a.href = url; a.download = 'happy-birthday-nitesh.html'; document.body.appendChild(a); a.click(); a.remove(); URL.revokeObjectURL(url);
        });

        /*******************************
         * Photo slots: click to upload + drag/drop + keyboard accessible
         *
         * The page contains the exact placeholders you requested:
         * <img id="photo1" src="PHOTO_1_PLACEHOLDER.jpg" alt="photo 1">
         * <img id="photo2" src="PHOTO_2_PLACEHOLDER.jpg" alt="photo 2">
         * <img id="photo3" src="PHOTO_3_PLACEHOLDER.jpg" alt="photo 3">
         * <img id="photo4" src="PHOTO_4_PLACEHOLDER.jpg" alt="photo 4">
         *
         * When an image is uploaded, that <img>'s src is replaced with a data URL (persisted only in this page).
         *******************************/
        const slots = document.querySelectorAll('.slot');
        slots.forEach(slot => {
            const idx = slot.dataset.index;
            const img = slot.querySelector('img');

            // Click -> file picker
            slot.addEventListener('click', () => filePickerAndSet(img));

            // Allow Enter/Space to open picker for keyboard users
            slot.addEventListener('keydown', (e) => {
                if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); filePickerAndSet(img); }
            });

            // Drag & drop
            slot.addEventListener('dragover', (e) => { e.preventDefault(); slot.style.opacity = 0.9; });
            slot.addEventListener('dragleave', () => { slot.style.opacity = 1; });
            slot.addEventListener('drop', (e) => {
                e.preventDefault();
                slot.style.opacity = 1;
                const f = e.dataTransfer.files && e.dataTransfer.files[0];
                if (f && f.type.startsWith('image/')) loadFileToImg(f, img);
            });
        });

        // helper: open file picker and set selected image into given img element
        function filePickerAndSet(imgEl) {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = 'image/*';
            input.onchange = (ev) => {
                const f = ev.target.files && ev.target.files[0];
                if (!f) return;
                if (!f.type.startsWith('image/')) { alert('Please upload an image file.'); return; }
                loadFileToImg(f, imgEl);
            };
            input.click();
        }

        function loadFileToImg(file, imgEl) {
            const reader = new FileReader();
            reader.onload = () => {
                // HERE we insert the user's photo as a data URL into the page.
                // That updates the <img id="photoN"> src attribute to a data URL so
                // it stays with the HTML snapshot if downloaded.
                imgEl.src = reader.result;
            };
            reader.readAsDataURL(file);
        }

        /*******************************
         * Keyboard + focus niceties
         *******************************/
        // Make sure modal can be closed with Escape (already wired), and set initial focus to main button
        openSurprise.focus();

        /*******************************
         * End of script
         *******************************/
    </script>
</body>

</html>
